#'query';
using Damselfly.Components;
using System;

var expand = @(p) $(var t = p |> Environment.ExpandEnvironmentVariables) p: p, expand(t);
var paths = '%PATH%' |> expand @() $_.Split(';') -> (@()$_.TrimEnd('\\')) -? @!= '' !?;
var exts = [ '', '.exe', '.cmd', '.bat' ];

// Todo: probably introduces low-sev squatting vuln via multiple extensions, fix.
export string WindowsPath.Search = @(string path)
	paths-<(@(p) exts->@(e) Path.Combine(p, path + e)) @aq.first(File.Exists);
